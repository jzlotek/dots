#!/usr/bin/env bash
# sets hyprpaper background and colorscheme
# does exaclty what you think it does

[ -z $1 ] && exit 1

CONFIG_DIR="${XDG_CONFIG_DIR:-$HOME/.config}"
WALLPAPER_FILE="${XDG_CONFIG_DIR:-$HOME/.config}/wallpaper.png"

command -v magick >/dev/null || exit 0

magick "${1}" "${WALLPAPER_FILE}"

settheme

if [ ! -z "$(pidof hyprpaper)" ]; then
	killall hyprpaper 2>/dev/null
	nohup >/dev/null hyprpaper 2>&1 &
fi

notify-send -a setbg "Wallpaper Set" -i "${WALLPAPER_FILE}" >/dev/null || true
